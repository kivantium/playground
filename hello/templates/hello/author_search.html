{% extends 'hello/base.html' %}

{% block content %}
<section class="section">
  <div class="container">
    <h2 class="h4 mt-5">絵師検索</h2>
    <form id="name_form" method="" action="">
      <div class="form-group">
        <label for="screen_name">アカウント名</label>
        <input type="text" class="form-control" id="screen_name">
        <p class="mt-2">@を除いて入力してください（例: @kamieshi→kamieshi）</p>
      </div>
      <button type="submit" class="btn btn-primary">検索</button>
    </form>
    <hr>
    <h3 class="h5 mt-5">登録画像数が多い人</h2>
    <ul class="mt-3">
      {% for author in author_list %}
      <li class="my-2"><a href="/author/{{ author.author_screen_name }}">@{{ author.author_screen_name }}</a>: {{ author.cnt }}枚</li>
      {% endfor %}
    </ul>
  </div>
</section>
{% endblock %}

{% block script %}
<script src="https://unpkg.com/masonry-layout@4/dist/masonry.pkgd.min.js"></script>
<script src="https://unpkg.com/imagesloaded@4/imagesloaded.pkgd.min.js"></script>
<script>
  var $grid = $('.grid').masonry({
    itemSelector: '.grid-item',
    columnWidth: '.grid-sizer',
    percentPosition: true,
    transitionDuration: 0
  });
  $grid.imagesLoaded().progress(function() {
    $grid.masonry('layout');
  });
  $('#show_nsfw').change(function() {
    location.href = "{{ checked_page|safe }}";
  });
  $('#name_form').submit( function() {
    var screen_name = $("#screen_name").val();
    location.href = "/author/" + screen_name;
    return false;
  });
</script>
{% endblock %}
